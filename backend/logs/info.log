2026-01-12 19:37:05,158 - INFO - root - 数据库连接成功
2026-01-12 19:37:05,202 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-12 19:37:05,215 - INFO - root - user_connections 表创建成功
2026-01-12 19:37:05,218 - INFO - root - user_devices 表创建成功
2026-01-12 19:37:05,222 - INFO - root - message_queue 表创建成功
2026-01-12 19:37:05,222 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-12 19:37:05,222 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-12 19:37:08,830 - INFO - __main__ - 客服 小旭 登录成功，ID: 2
2026-01-12 19:37:32,164 - INFO - __main__ - WebSocket 连接建立: uz8nLiXOW9N2bcwnAAAB
2026-01-12 19:37:32,217 - INFO - root - 用户 1 的设备 ddb68a17-9872-44d0-8afe-a852c7d33228 已注册
2026-01-12 19:37:32,250 - INFO - root - 用户 1 的连接 121e151e-1bb8-45e0-ab9a-7bcd845c7340 已创建
2026-01-12 19:37:32,251 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 121e151e-1bb8-45e0-ab9a-7bcd845c7340 (socket: uz8nLiXOW9N2bcwnAAAB)
2026-01-12 19:37:32,251 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 121e151e-1bb8-45e0-ab9a-7bcd845c7340
2026-01-12 19:37:34,327 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=476
2026-01-12 19:37:34,373 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:37:34,405 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:37:44,528 - INFO - __main__ - WebSocket 连接建立: inGH1BpWpaNlmkTXAAAD
2026-01-12 19:37:44,541 - INFO - root - 用户 2 的设备 1768217864531-03y66qguo 已注册
2026-01-12 19:37:44,551 - INFO - root - 用户 2 的连接 1768217818391-elrn9a5e3 已创建
2026-01-12 19:37:44,553 - INFO - backend.websocket.websocket_manager - 用户 2 建立连接: 1768217818391-elrn9a5e3 (socket: inGH1BpWpaNlmkTXAAAD)
2026-01-12 19:37:44,553 - INFO - __main__ - 用户 2 注册 WebSocket 连接成功: 1768217818391-elrn9a5e3
2026-01-12 19:37:48,424 - INFO - __main__ - 准备向用户 1 推送消息: message_id=477, session_id=chat_1_7de313f9, from_user_id=2
2026-01-12 19:37:48,425 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=477
2026-01-12 19:37:48,425 - INFO - __main__ - 消息推送完成: message_id=477, to_user_id=1, delivered_count=1
2026-01-12 19:37:48,426 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=477
2026-01-12 19:37:48,446 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:37:48,453 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:41:40,560 - INFO - __main__ - WebSocket 连接断开: inGH1BpWpaNlmkTXAAAD
2026-01-12 19:41:40,561 - INFO - __main__ - WebSocket 连接断开: uz8nLiXOW9N2bcwnAAAB
2026-01-12 19:42:02,582 - INFO - root - 数据库连接成功
2026-01-12 19:42:02,626 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-12 19:42:02,636 - INFO - root - user_connections 表创建成功
2026-01-12 19:42:02,640 - INFO - root - user_devices 表创建成功
2026-01-12 19:42:02,645 - INFO - root - message_queue 表创建成功
2026-01-12 19:42:02,645 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-12 19:42:02,646 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-12 19:42:11,778 - INFO - __main__ - WebSocket 连接建立: el2Yr9BogiJ3mP4XAAAB
2026-01-12 19:42:11,827 - INFO - root - 用户 2 的设备 1768217864531-03y66qguo 已注册
2026-01-12 19:42:11,856 - INFO - root - 用户 2 的连接 1768217818391-elrn9a5e3 已创建
2026-01-12 19:42:11,857 - INFO - backend.websocket.websocket_manager - 成功将 socket el2Yr9BogiJ3mP4XAAAB 加入房间 user_2
2026-01-12 19:42:11,857 - INFO - backend.websocket.websocket_manager - 用户 2 建立连接: 1768217818391-elrn9a5e3 (socket: el2Yr9BogiJ3mP4XAAAB)
2026-01-12 19:42:11,858 - INFO - __main__ - 用户 2 注册 WebSocket 连接成功: 1768217818391-elrn9a5e3
2026-01-12 19:42:17,598 - INFO - __main__ - WebSocket 连接建立: fz4rA7o6GTtecxafAAAD
2026-01-12 19:42:17,645 - INFO - root - 用户 1 的设备 61696130-6d6d-4395-a274-1f645d69a809 已注册
2026-01-12 19:42:17,654 - INFO - root - 用户 1 的连接 c5abc4bb-c1c8-49d7-b88a-4d1d9ecd72f3 已创建
2026-01-12 19:42:17,655 - INFO - backend.websocket.websocket_manager - 成功将 socket fz4rA7o6GTtecxafAAAD 加入房间 user_1
2026-01-12 19:42:17,655 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: c5abc4bb-c1c8-49d7-b88a-4d1d9ecd72f3 (socket: fz4rA7o6GTtecxafAAAD)
2026-01-12 19:42:17,655 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: c5abc4bb-c1c8-49d7-b88a-4d1d9ecd72f3
2026-01-12 19:42:24,565 - INFO - __main__ - 准备向用户 2 推送消息: message_id=478, session_id=chat_1_c2d65a3f, from_user_id=1
2026-01-12 19:42:24,566 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=478, namespace=/
2026-01-12 19:42:24,567 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=478
2026-01-12 19:42:24,568 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=478
2026-01-12 19:42:24,568 - INFO - __main__ - 消息推送完成: message_id=478, to_user_id=2, delivered_count=1
2026-01-12 19:42:24,593 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=478, namespace=/
2026-01-12 19:42:24,595 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=478
2026-01-12 19:42:24,596 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=478
2026-01-12 19:42:24,616 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:42:24,617 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:42:24,618 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:42:24,641 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:42:24,641 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:42:24,642 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:42:24,729 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:42:24,730 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:42:24,730 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:42:29,621 - INFO - __main__ - 准备向用户 1 推送消息: message_id=479, session_id=chat_1_c2d65a3f, from_user_id=2
2026-01-12 19:42:29,622 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=479, namespace=/
2026-01-12 19:42:29,622 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=479
2026-01-12 19:42:29,623 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=479
2026-01-12 19:42:29,623 - INFO - __main__ - 消息推送完成: message_id=479, to_user_id=1, delivered_count=1
2026-01-12 19:42:29,649 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=479, namespace=/
2026-01-12 19:42:29,649 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=479
2026-01-12 19:42:29,650 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=479
2026-01-12 19:42:29,674 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:42:29,674 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:42:29,675 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:42:29,679 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:42:29,680 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:42:29,681 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:44:20,092 - INFO - __main__ - WebSocket 连接断开: fz4rA7o6GTtecxafAAAD
2026-01-12 19:44:20,103 - INFO - root - 连接 c5abc4bb-c1c8-49d7-b88a-4d1d9ecd72f3 已断开
2026-01-12 19:44:20,103 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: c5abc4bb-c1c8-49d7-b88a-4d1d9ecd72f3
2026-01-12 19:48:32,141 - INFO - __main__ - WebSocket 连接建立: LFOPx9r7yNZwh0t5AAAF
2026-01-12 19:48:32,156 - INFO - root - 用户 1 的设备 290b3310-e7ea-413f-ae53-7672b1d23e0f 已注册
2026-01-12 19:48:32,189 - INFO - root - 用户 1 的连接 193af7d9-8df4-4753-82b2-31303b4db62c 已创建
2026-01-12 19:48:32,189 - INFO - backend.websocket.websocket_manager - 成功将 socket LFOPx9r7yNZwh0t5AAAF 加入房间 user_1
2026-01-12 19:48:32,189 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 193af7d9-8df4-4753-82b2-31303b4db62c (socket: LFOPx9r7yNZwh0t5AAAF)
2026-01-12 19:48:32,190 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 193af7d9-8df4-4753-82b2-31303b4db62c
2026-01-12 19:48:41,110 - INFO - __main__ - 准备向用户 2 推送消息: message_id=480, session_id=chat_1_caac5a09, from_user_id=1
2026-01-12 19:48:41,111 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=480, namespace=/
2026-01-12 19:48:41,111 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=480
2026-01-12 19:48:41,112 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=480
2026-01-12 19:48:41,112 - INFO - __main__ - 消息推送完成: message_id=480, to_user_id=2, delivered_count=1
2026-01-12 19:48:41,121 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=480, namespace=/
2026-01-12 19:48:41,121 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=480
2026-01-12 19:48:41,122 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=480
2026-01-12 19:48:41,143 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:48:41,144 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:48:41,145 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:48:41,149 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:48:41,150 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:48:41,150 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:48:41,512 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:48:41,513 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:48:41,513 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:48:44,129 - INFO - __main__ - 准备向用户 1 推送消息: message_id=481, session_id=chat_1_caac5a09, from_user_id=2
2026-01-12 19:48:44,130 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=481, namespace=/
2026-01-12 19:48:44,130 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=481
2026-01-12 19:48:44,130 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=481
2026-01-12 19:48:44,131 - INFO - __main__ - 消息推送完成: message_id=481, to_user_id=1, delivered_count=1
2026-01-12 19:48:44,134 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=481, namespace=/
2026-01-12 19:48:44,135 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=481
2026-01-12 19:48:44,135 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=481
2026-01-12 19:48:44,161 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:48:44,161 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:48:44,162 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:48:44,167 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:48:44,167 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:48:44,168 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:48:44,172 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:48:44,173 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:48:44,173 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:51:59,776 - INFO - __main__ - WebSocket 连接断开: LFOPx9r7yNZwh0t5AAAF
2026-01-12 19:51:59,785 - INFO - root - 连接 193af7d9-8df4-4753-82b2-31303b4db62c 已断开
2026-01-12 19:51:59,785 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 193af7d9-8df4-4753-82b2-31303b4db62c
2026-01-12 19:52:17,993 - INFO - __main__ - WebSocket 连接建立: kYAuaH7aFdWPHFqRAAAH
2026-01-12 19:52:18,041 - INFO - root - 用户 1 的设备 c7c7b574-17aa-4f9f-a656-5abbeb86e844 已注册
2026-01-12 19:52:18,053 - INFO - root - 用户 1 的连接 149226b1-2413-476a-8b10-304368f6dd7c 已创建
2026-01-12 19:52:18,054 - INFO - backend.websocket.websocket_manager - 成功将 socket kYAuaH7aFdWPHFqRAAAH 加入房间 user_1
2026-01-12 19:52:18,055 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 149226b1-2413-476a-8b10-304368f6dd7c (socket: kYAuaH7aFdWPHFqRAAAH)
2026-01-12 19:52:18,056 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 149226b1-2413-476a-8b10-304368f6dd7c
2026-01-12 19:52:26,331 - INFO - __main__ - 准备向用户 2 推送消息: message_id=482, session_id=chat_1_40f84f50, from_user_id=1
2026-01-12 19:52:26,332 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=482, namespace=/
2026-01-12 19:52:26,334 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=482
2026-01-12 19:52:26,335 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=482
2026-01-12 19:52:26,335 - INFO - __main__ - 消息推送完成: message_id=482, to_user_id=2, delivered_count=1
2026-01-12 19:52:26,344 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=482, namespace=/
2026-01-12 19:52:26,346 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=482
2026-01-12 19:52:26,346 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=482
2026-01-12 19:52:26,367 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:26,368 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:52:26,369 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:26,375 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:26,376 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:52:26,377 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:26,446 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:26,447 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=message_status, message_id=unknown
2026-01-12 19:52:26,448 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:29,256 - INFO - __main__ - 准备向用户 1 推送消息: message_id=483, session_id=chat_1_40f84f50, from_user_id=2
2026-01-12 19:52:29,256 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=483, namespace=/
2026-01-12 19:52:29,257 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=483
2026-01-12 19:52:29,257 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=483
2026-01-12 19:52:29,258 - INFO - __main__ - 消息推送完成: message_id=483, to_user_id=1, delivered_count=1
2026-01-12 19:52:29,261 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=483, namespace=/
2026-01-12 19:52:29,262 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=483
2026-01-12 19:52:29,262 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=483
2026-01-12 19:52:29,279 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:29,280 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:52:29,280 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:29,285 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:29,286 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:52:29,286 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:29,291 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:29,291 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:52:29,292 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:49,173 - INFO - __main__ - 准备向用户 1 推送消息: message_id=484, session_id=chat_1_40f84f50, from_user_id=2
2026-01-12 19:52:49,173 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=484, namespace=/
2026-01-12 19:52:49,174 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=484
2026-01-12 19:52:49,174 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=484
2026-01-12 19:52:49,174 - INFO - __main__ - 消息推送完成: message_id=484, to_user_id=1, delivered_count=1
2026-01-12 19:52:49,176 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=484, namespace=/
2026-01-12 19:52:49,177 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=484
2026-01-12 19:52:49,177 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=484
2026-01-12 19:52:49,203 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:49,203 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:52:49,204 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:52:49,210 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:52:49,210 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:52:49,211 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:56:36,520 - INFO - __main__ - WebSocket 连接断开: kYAuaH7aFdWPHFqRAAAH
2026-01-12 19:56:36,528 - INFO - root - 连接 149226b1-2413-476a-8b10-304368f6dd7c 已断开
2026-01-12 19:56:36,529 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 149226b1-2413-476a-8b10-304368f6dd7c
2026-01-12 19:56:50,688 - INFO - __main__ - WebSocket 连接建立: Uv-6tGqpWRc8WiblAAAJ
2026-01-12 19:56:50,722 - INFO - root - 用户 1 的设备 0cb5be61-a257-411c-8d4a-1b59ba42683e 已注册
2026-01-12 19:56:50,753 - INFO - root - 用户 1 的连接 92a09377-fa24-46f6-99f5-b4cc6f34b69f 已创建
2026-01-12 19:56:50,754 - INFO - backend.websocket.websocket_manager - 成功将 socket Uv-6tGqpWRc8WiblAAAJ 加入房间 user_1
2026-01-12 19:56:50,755 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 92a09377-fa24-46f6-99f5-b4cc6f34b69f (socket: Uv-6tGqpWRc8WiblAAAJ)
2026-01-12 19:56:50,755 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 92a09377-fa24-46f6-99f5-b4cc6f34b69f
2026-01-12 19:56:57,956 - INFO - __main__ - 准备向用户 1 推送消息: message_id=485, session_id=chat_1_51500281, from_user_id=2
2026-01-12 19:56:57,957 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=485, namespace=/
2026-01-12 19:56:57,957 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=485
2026-01-12 19:56:57,958 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=485
2026-01-12 19:56:57,958 - INFO - __main__ - 消息推送完成: message_id=485, to_user_id=1, delivered_count=1
2026-01-12 19:56:57,962 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=485, namespace=/
2026-01-12 19:56:57,963 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=485
2026-01-12 19:56:57,963 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=485
2026-01-12 19:56:57,988 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:56:57,989 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:56:57,989 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:56:57,994 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:56:57,994 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:56:57,994 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 19:56:58,016 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 19:56:58,017 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 19:56:58,017 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:00:46,780 - INFO - __main__ - WebSocket 连接断开: Uv-6tGqpWRc8WiblAAAJ
2026-01-12 20:00:46,788 - INFO - root - 连接 92a09377-fa24-46f6-99f5-b4cc6f34b69f 已断开
2026-01-12 20:00:46,788 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 92a09377-fa24-46f6-99f5-b4cc6f34b69f
2026-01-12 20:00:59,864 - INFO - __main__ - WebSocket 连接建立: EKG5h4ioeWrnzMVgAAAL
2026-01-12 20:00:59,912 - INFO - root - 用户 1 的设备 dfb88587-dfa0-4460-9d71-992ea421edfd 已注册
2026-01-12 20:00:59,947 - INFO - root - 用户 1 的连接 c7a5f395-8042-41e8-9dd2-44bc76a5ac63 已创建
2026-01-12 20:00:59,948 - INFO - backend.websocket.websocket_manager - 成功将 socket EKG5h4ioeWrnzMVgAAAL 加入房间 user_1
2026-01-12 20:00:59,949 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: c7a5f395-8042-41e8-9dd2-44bc76a5ac63 (socket: EKG5h4ioeWrnzMVgAAAL)
2026-01-12 20:00:59,949 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: c7a5f395-8042-41e8-9dd2-44bc76a5ac63
2026-01-12 20:01:07,294 - INFO - __main__ - 准备向用户 1 推送消息: message_id=486, session_id=chat_1_885be6b5, from_user_id=2
2026-01-12 20:01:07,295 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=486, namespace=/
2026-01-12 20:01:07,296 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=486
2026-01-12 20:01:07,296 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=486
2026-01-12 20:01:07,297 - INFO - __main__ - 消息推送完成: message_id=486, to_user_id=1, delivered_count=1
2026-01-12 20:01:07,298 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=486, namespace=/
2026-01-12 20:01:07,299 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=486
2026-01-12 20:01:07,299 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=486
2026-01-12 20:01:07,324 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:01:07,325 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:01:07,325 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:01:07,329 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:01:07,330 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:01:07,330 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:03:25,045 - INFO - __main__ - WebSocket 连接断开: EKG5h4ioeWrnzMVgAAAL
2026-01-12 20:03:25,056 - INFO - root - 连接 c7a5f395-8042-41e8-9dd2-44bc76a5ac63 已断开
2026-01-12 20:03:25,057 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: c7a5f395-8042-41e8-9dd2-44bc76a5ac63
2026-01-12 20:03:31,354 - INFO - __main__ - WebSocket 连接断开: el2Yr9BogiJ3mP4XAAAB
2026-01-12 20:03:31,364 - INFO - root - 连接 1768217818391-elrn9a5e3 已断开
2026-01-12 20:03:31,365 - INFO - backend.websocket.websocket_manager - 用户 2 断开连接: 1768217818391-elrn9a5e3
2026-01-12 20:03:37,994 - INFO - root - 数据库连接成功
2026-01-12 20:03:38,032 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-12 20:03:38,043 - INFO - root - user_connections 表创建成功
2026-01-12 20:03:38,045 - INFO - root - user_devices 表创建成功
2026-01-12 20:03:38,048 - INFO - root - message_queue 表创建成功
2026-01-12 20:03:38,048 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-12 20:03:38,049 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-12 20:03:38,288 - INFO - __main__ - WebSocket 连接建立: ai8j1aaWejGfUPz7AAAB
2026-01-12 20:03:38,302 - INFO - root - 用户 2 的设备 1768217864531-03y66qguo 已注册
2026-01-12 20:03:38,312 - INFO - root - 用户 2 的连接 1768217818391-elrn9a5e3 已创建
2026-01-12 20:03:38,312 - INFO - backend.websocket.websocket_manager - 成功将 socket ai8j1aaWejGfUPz7AAAB 加入房间 user_2
2026-01-12 20:03:38,312 - INFO - backend.websocket.websocket_manager - 用户 2 建立连接: 1768217818391-elrn9a5e3 (socket: ai8j1aaWejGfUPz7AAAB)
2026-01-12 20:03:38,312 - INFO - __main__ - 用户 2 注册 WebSocket 连接成功: 1768217818391-elrn9a5e3
2026-01-12 20:03:51,267 - INFO - __main__ - WebSocket 连接建立: QtyyVtyJX7n8emuzAAAD
2026-01-12 20:03:51,305 - INFO - root - 用户 1 的设备 733111d0-fb1f-4dfc-975a-d3204b261dce 已注册
2026-01-12 20:03:51,313 - INFO - root - 用户 1 的连接 72327b70-bb7e-4fff-a872-30ca7b311c91 已创建
2026-01-12 20:03:51,314 - INFO - backend.websocket.websocket_manager - 成功将 socket QtyyVtyJX7n8emuzAAAD 加入房间 user_1
2026-01-12 20:03:51,314 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 72327b70-bb7e-4fff-a872-30ca7b311c91 (socket: QtyyVtyJX7n8emuzAAAD)
2026-01-12 20:03:51,314 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 72327b70-bb7e-4fff-a872-30ca7b311c91
2026-01-12 20:03:58,193 - INFO - __main__ - 准备向用户 1 推送消息: message_id=487, session_id=chat_1_642b063e, from_user_id=2
2026-01-12 20:03:58,193 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=487, namespace=/
2026-01-12 20:03:58,194 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=487
2026-01-12 20:03:58,194 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=487
2026-01-12 20:03:58,194 - INFO - __main__ - 消息推送完成: message_id=487, to_user_id=1, delivered_count=1
2026-01-12 20:03:58,195 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=487, namespace=/
2026-01-12 20:03:58,195 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=487
2026-01-12 20:03:58,195 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=487
2026-01-12 20:03:58,225 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:03:58,226 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:03:58,226 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:03:58,233 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:03:58,233 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:03:58,234 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:05:47,451 - INFO - __main__ - WebSocket 连接断开: QtyyVtyJX7n8emuzAAAD
2026-01-12 20:05:47,461 - INFO - root - 连接 72327b70-bb7e-4fff-a872-30ca7b311c91 已断开
2026-01-12 20:05:47,461 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 72327b70-bb7e-4fff-a872-30ca7b311c91
2026-01-12 20:06:02,019 - INFO - __main__ - WebSocket 连接建立: dTENeLN-zcwSzV8DAAAF
2026-01-12 20:06:02,065 - INFO - root - 用户 1 的设备 a23872a1-5b1c-4590-933e-e783258885ba 已注册
2026-01-12 20:06:02,087 - INFO - root - 用户 1 的连接 dfd1d2b5-b6fd-4e69-ab0a-b439f500d41e 已创建
2026-01-12 20:06:02,088 - INFO - backend.websocket.websocket_manager - 成功将 socket dTENeLN-zcwSzV8DAAAF 加入房间 user_1
2026-01-12 20:06:02,089 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: dfd1d2b5-b6fd-4e69-ab0a-b439f500d41e (socket: dTENeLN-zcwSzV8DAAAF)
2026-01-12 20:06:02,089 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: dfd1d2b5-b6fd-4e69-ab0a-b439f500d41e
2026-01-12 20:06:07,099 - INFO - __main__ - 准备向用户 1 推送消息: message_id=488, session_id=chat_1_d48099dd, from_user_id=2
2026-01-12 20:06:07,100 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=488, namespace=/
2026-01-12 20:06:07,100 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=488
2026-01-12 20:06:07,101 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=488
2026-01-12 20:06:07,101 - INFO - __main__ - 消息推送完成: message_id=488, to_user_id=1, delivered_count=1
2026-01-12 20:06:07,104 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=488, namespace=/
2026-01-12 20:06:07,105 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=488
2026-01-12 20:06:07,105 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=488
2026-01-12 20:06:07,128 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:06:07,129 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:06:07,129 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:06:07,136 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:06:07,137 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:06:07,137 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:07:49,379 - INFO - __main__ - WebSocket 连接断开: dTENeLN-zcwSzV8DAAAF
2026-01-12 20:07:49,386 - INFO - root - 连接 dfd1d2b5-b6fd-4e69-ab0a-b439f500d41e 已断开
2026-01-12 20:07:49,387 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: dfd1d2b5-b6fd-4e69-ab0a-b439f500d41e
2026-01-12 20:08:01,367 - INFO - __main__ - WebSocket 连接建立: yumgp6YHokPpAvLpAAAH
2026-01-12 20:08:01,415 - INFO - root - 用户 1 的设备 54b4d0f1-1272-4836-96a1-24165b41f43d 已注册
2026-01-12 20:08:01,423 - INFO - root - 用户 1 的连接 956949d6-56f3-4cdf-9eed-86072b900b3f 已创建
2026-01-12 20:08:01,423 - INFO - backend.websocket.websocket_manager - 成功将 socket yumgp6YHokPpAvLpAAAH 加入房间 user_1
2026-01-12 20:08:01,424 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 956949d6-56f3-4cdf-9eed-86072b900b3f (socket: yumgp6YHokPpAvLpAAAH)
2026-01-12 20:08:01,424 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 956949d6-56f3-4cdf-9eed-86072b900b3f
2026-01-12 20:08:05,704 - INFO - __main__ - 准备向用户 1 推送消息: message_id=489, session_id=chat_1_77756b2f, from_user_id=2
2026-01-12 20:08:05,705 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=489, namespace=/
2026-01-12 20:08:05,706 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=489
2026-01-12 20:08:05,707 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=489
2026-01-12 20:08:05,707 - INFO - __main__ - 消息推送完成: message_id=489, to_user_id=1, delivered_count=1
2026-01-12 20:08:05,731 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=489, namespace=/
2026-01-12 20:08:05,732 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=489
2026-01-12 20:08:05,732 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=489
2026-01-12 20:08:05,754 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:08:05,755 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:08:05,755 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:08:05,763 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:08:05,764 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:08:05,764 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:12:25,065 - INFO - __main__ - WebSocket 连接断开: yumgp6YHokPpAvLpAAAH
2026-01-12 20:12:25,088 - INFO - root - 连接 956949d6-56f3-4cdf-9eed-86072b900b3f 已断开
2026-01-12 20:12:25,088 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 956949d6-56f3-4cdf-9eed-86072b900b3f
2026-01-12 20:12:27,102 - INFO - __main__ - WebSocket 连接断开: ai8j1aaWejGfUPz7AAAB
2026-01-12 20:12:27,110 - INFO - root - 连接 1768217818391-elrn9a5e3 已断开
2026-01-12 20:12:27,110 - INFO - backend.websocket.websocket_manager - 用户 2 断开连接: 1768217818391-elrn9a5e3
2026-01-12 20:12:33,798 - INFO - root - 数据库连接成功
2026-01-12 20:12:33,834 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-12 20:12:33,849 - INFO - root - user_connections 表创建成功
2026-01-12 20:12:33,853 - INFO - root - user_devices 表创建成功
2026-01-12 20:12:33,857 - INFO - root - message_queue 表创建成功
2026-01-12 20:12:33,857 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-12 20:12:33,857 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-12 20:12:36,993 - INFO - __main__ - WebSocket 连接建立: OmjRmLPaBOm_T5qZAAAB
2026-01-12 20:12:37,029 - INFO - root - 用户 2 的设备 1768217864531-03y66qguo 已注册
2026-01-12 20:12:37,057 - INFO - root - 用户 2 的连接 1768217818391-elrn9a5e3 已创建
2026-01-12 20:12:37,057 - INFO - backend.websocket.websocket_manager - 成功将 socket OmjRmLPaBOm_T5qZAAAB 加入房间 user_2
2026-01-12 20:12:37,058 - INFO - backend.websocket.websocket_manager - 用户 2 建立连接: 1768217818391-elrn9a5e3 (socket: OmjRmLPaBOm_T5qZAAAB)
2026-01-12 20:12:37,058 - INFO - __main__ - 用户 2 注册 WebSocket 连接成功: 1768217818391-elrn9a5e3
2026-01-12 20:12:37,976 - INFO - __main__ - WebSocket 连接断开: OmjRmLPaBOm_T5qZAAAB
2026-01-12 20:12:37,987 - INFO - root - 连接 1768217818391-elrn9a5e3 已断开
2026-01-12 20:12:37,987 - INFO - backend.websocket.websocket_manager - 用户 2 断开连接: 1768217818391-elrn9a5e3
2026-01-12 20:12:43,569 - INFO - __main__ - 客服 小旭 登录成功，ID: 2
2026-01-12 20:13:08,592 - INFO - root - 成功连接到邮件服务器
2026-01-12 20:13:08,998 - INFO - root - 验证码邮件已成功发送至 1054005418@qq.com
2026-01-12 20:13:09,012 - INFO - root - 已关闭与邮件服务器的连接
2026-01-12 20:13:09,013 - INFO - __main__ - 验证码邮件已成功发送至：1054005418@qq.com
2026-01-12 20:13:21,517 - INFO - __main__ - 用户 timio 登录成功，ID: 1
2026-01-12 20:13:21,720 - INFO - __main__ - WebSocket 连接建立: j9_pkmcLdwEzWnjDAAAD
2026-01-12 20:13:21,733 - INFO - root - 用户 1 的设备 9116afbd-5902-4ddf-add3-c904fbab891e 已注册
2026-01-12 20:13:21,742 - INFO - root - 用户 1 的连接 62e80e23-764d-42ec-97d6-0ee90f2e5b40 已创建
2026-01-12 20:13:21,742 - INFO - backend.websocket.websocket_manager - 成功将 socket j9_pkmcLdwEzWnjDAAAD 加入房间 user_1
2026-01-12 20:13:21,743 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 62e80e23-764d-42ec-97d6-0ee90f2e5b40 (socket: j9_pkmcLdwEzWnjDAAAD)
2026-01-12 20:13:21,743 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 62e80e23-764d-42ec-97d6-0ee90f2e5b40
2026-01-12 20:13:45,541 - INFO - __main__ - WebSocket 连接建立: aYBAIy8QkG3pPDK2AAAF
2026-01-12 20:13:45,555 - INFO - root - 用户 2 的设备 1768220025543-trv16ne3i 已注册
2026-01-12 20:13:45,565 - INFO - root - 用户 2 的连接 1768219958377-a2rtsn3if 已创建
2026-01-12 20:13:45,566 - INFO - backend.websocket.websocket_manager - 成功将 socket aYBAIy8QkG3pPDK2AAAF 加入房间 user_2
2026-01-12 20:13:45,566 - INFO - backend.websocket.websocket_manager - 用户 2 建立连接: 1768219958377-a2rtsn3if (socket: aYBAIy8QkG3pPDK2AAAF)
2026-01-12 20:13:45,567 - INFO - __main__ - 用户 2 注册 WebSocket 连接成功: 1768219958377-a2rtsn3if
2026-01-12 20:13:48,524 - INFO - __main__ - 准备向用户 1 推送消息: message_id=490, session_id=chat_1_3831be0c, from_user_id=2
2026-01-12 20:13:48,525 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=490, namespace=/
2026-01-12 20:13:48,525 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=490
2026-01-12 20:13:48,526 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=490
2026-01-12 20:13:48,526 - INFO - __main__ - 消息推送完成: message_id=490, to_user_id=1, delivered_count=1
2026-01-12 20:13:48,529 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=490, namespace=/
2026-01-12 20:13:48,530 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=490
2026-01-12 20:13:48,530 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=490
2026-01-12 20:13:48,561 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:13:48,562 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:13:48,562 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:13:48,565 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:13:48,566 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:13:48,567 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:13:48,573 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:13:48,574 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:13:48,574 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:22:14,799 - INFO - __main__ - WebSocket 连接断开: j9_pkmcLdwEzWnjDAAAD
2026-01-12 20:22:14,904 - INFO - root - 连接 62e80e23-764d-42ec-97d6-0ee90f2e5b40 已断开
2026-01-12 20:22:14,904 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 62e80e23-764d-42ec-97d6-0ee90f2e5b40
2026-01-12 20:22:32,810 - INFO - root - 成功连接到邮件服务器
2026-01-12 20:22:33,195 - INFO - root - 验证码邮件已成功发送至 1054005418@qq.com
2026-01-12 20:22:33,207 - INFO - root - 已关闭与邮件服务器的连接
2026-01-12 20:22:33,207 - INFO - __main__ - 验证码邮件已成功发送至：1054005418@qq.com
2026-01-12 20:22:53,032 - INFO - __main__ - 用户 timio 登录成功，ID: 1
2026-01-12 20:22:53,193 - INFO - __main__ - WebSocket 连接建立: fatoBJCp-YpHe9-yAAAH
2026-01-12 20:22:53,232 - INFO - root - 用户 1 的设备 543028ff-1a44-415d-9aca-599349ba686a 已注册
2026-01-12 20:22:53,260 - INFO - root - 用户 1 的连接 a185294d-c2c6-4e36-9966-2edd5870844a 已创建
2026-01-12 20:22:53,261 - INFO - backend.websocket.websocket_manager - 成功将 socket fatoBJCp-YpHe9-yAAAH 加入房间 user_1
2026-01-12 20:22:53,261 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: a185294d-c2c6-4e36-9966-2edd5870844a (socket: fatoBJCp-YpHe9-yAAAH)
2026-01-12 20:22:53,262 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: a185294d-c2c6-4e36-9966-2edd5870844a
2026-01-12 20:23:12,451 - INFO - __main__ - 准备向用户 1 推送消息: message_id=491, session_id=chat_1_fac92484, from_user_id=2
2026-01-12 20:23:12,452 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=491, namespace=/
2026-01-12 20:23:12,452 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=491
2026-01-12 20:23:12,454 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=491
2026-01-12 20:23:12,454 - INFO - __main__ - 消息推送完成: message_id=491, to_user_id=1, delivered_count=1
2026-01-12 20:23:12,455 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=491, namespace=/
2026-01-12 20:23:12,456 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=491
2026-01-12 20:23:12,456 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=491
2026-01-12 20:23:12,484 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:23:12,485 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:23:12,485 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:23:12,492 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:23:12,492 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:23:12,492 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:25:04,017 - WARNING - backend.websocket.websocket_manager - 连接 a185294d-c2c6-4e36-9966-2edd5870844a 心跳超时，自动断开
2026-01-12 20:25:04,027 - INFO - root - 连接 a185294d-c2c6-4e36-9966-2edd5870844a 已断开
2026-01-12 20:25:04,028 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: a185294d-c2c6-4e36-9966-2edd5870844a
2026-01-12 20:28:39,554 - INFO - __main__ - WebSocket 连接断开: fatoBJCp-YpHe9-yAAAH
2026-01-12 20:28:39,554 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-12 20:29:57,588 - INFO - __main__ - WebSocket 连接建立: QSM-qazGlZtvRD6OAAAJ
2026-01-12 20:29:57,600 - INFO - root - 用户 1 的设备 e2ace8e0-c9a6-4cb5-bbde-e6ec695364ae 已注册
2026-01-12 20:29:57,609 - INFO - root - 用户 1 的连接 7e67b915-856e-4ff2-9c18-94d07921c088 已创建
2026-01-12 20:29:57,609 - INFO - backend.websocket.websocket_manager - 成功将 socket QSM-qazGlZtvRD6OAAAJ 加入房间 user_1
2026-01-12 20:29:57,610 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 7e67b915-856e-4ff2-9c18-94d07921c088 (socket: QSM-qazGlZtvRD6OAAAJ)
2026-01-12 20:29:57,610 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 7e67b915-856e-4ff2-9c18-94d07921c088
2026-01-12 20:30:11,240 - INFO - __main__ - 准备向用户 1 推送消息: message_id=492, session_id=chat_1_75f48cc3, from_user_id=2
2026-01-12 20:30:11,240 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=492, namespace=/
2026-01-12 20:30:11,241 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=492
2026-01-12 20:30:11,241 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=492
2026-01-12 20:30:11,241 - INFO - __main__ - 消息推送完成: message_id=492, to_user_id=1, delivered_count=1
2026-01-12 20:30:11,243 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=492, namespace=/
2026-01-12 20:30:11,243 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=492
2026-01-12 20:30:11,243 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=492
2026-01-12 20:30:11,267 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:30:11,267 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:30:11,268 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:30:11,275 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:30:11,276 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:30:11,276 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:30:11,280 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:30:11,281 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:30:11,281 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:32:04,105 - WARNING - backend.websocket.websocket_manager - 连接 7e67b915-856e-4ff2-9c18-94d07921c088 心跳超时，自动断开
2026-01-12 20:32:04,128 - INFO - root - 连接 7e67b915-856e-4ff2-9c18-94d07921c088 已断开
2026-01-12 20:32:04,130 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 7e67b915-856e-4ff2-9c18-94d07921c088
2026-01-12 20:32:37,379 - INFO - __main__ - WebSocket 连接断开: QSM-qazGlZtvRD6OAAAJ
2026-01-12 20:32:37,379 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-12 20:32:39,885 - INFO - __main__ - WebSocket 连接建立: z5yANH31Tpr5qNdSAAAL
2026-01-12 20:32:39,914 - INFO - root - 用户 1 的设备 89ec03ef-9cfd-4715-a759-ec8e4727fb7e 已注册
2026-01-12 20:32:39,941 - INFO - root - 用户 1 的连接 86bcc34a-5940-4bf2-9aeb-ab654558e56b 已创建
2026-01-12 20:32:39,942 - INFO - backend.websocket.websocket_manager - 成功将 socket z5yANH31Tpr5qNdSAAAL 加入房间 user_1
2026-01-12 20:32:39,942 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 86bcc34a-5940-4bf2-9aeb-ab654558e56b (socket: z5yANH31Tpr5qNdSAAAL)
2026-01-12 20:32:39,942 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 86bcc34a-5940-4bf2-9aeb-ab654558e56b
2026-01-12 20:32:57,293 - INFO - __main__ - 准备向用户 1 推送消息: message_id=493, session_id=chat_1_ce67ade6, from_user_id=2
2026-01-12 20:32:57,295 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=493, namespace=/
2026-01-12 20:32:57,295 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=493
2026-01-12 20:32:57,296 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=493
2026-01-12 20:32:57,296 - INFO - __main__ - 消息推送完成: message_id=493, to_user_id=1, delivered_count=1
2026-01-12 20:32:57,298 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=493, namespace=/
2026-01-12 20:32:57,299 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=493
2026-01-12 20:32:57,300 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=493
2026-01-12 20:32:57,322 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:32:57,323 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:32:57,323 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:32:57,327 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:32:57,328 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:32:57,328 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:32:57,334 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:32:57,335 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:32:57,336 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:35:04,214 - WARNING - backend.websocket.websocket_manager - 连接 86bcc34a-5940-4bf2-9aeb-ab654558e56b 心跳超时，自动断开
2026-01-12 20:35:04,233 - INFO - root - 连接 86bcc34a-5940-4bf2-9aeb-ab654558e56b 已断开
2026-01-12 20:35:04,234 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 86bcc34a-5940-4bf2-9aeb-ab654558e56b
2026-01-12 20:36:22,875 - INFO - __main__ - WebSocket 连接断开: z5yANH31Tpr5qNdSAAAL
2026-01-12 20:36:22,875 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-12 20:36:26,725 - INFO - __main__ - WebSocket 连接建立: guoaLFCCv_PmUmcuAAAN
2026-01-12 20:36:26,740 - INFO - root - 用户 1 的设备 d330ae27-06cf-47bc-b356-8eb4126bfc4f 已注册
2026-01-12 20:36:26,750 - INFO - root - 用户 1 的连接 05b2b1b8-4c40-4afc-a9d8-f04e8579ad2b 已创建
2026-01-12 20:36:26,751 - INFO - backend.websocket.websocket_manager - 成功将 socket guoaLFCCv_PmUmcuAAAN 加入房间 user_1
2026-01-12 20:36:26,751 - INFO - backend.websocket.websocket_manager - 用户 1 建立连接: 05b2b1b8-4c40-4afc-a9d8-f04e8579ad2b (socket: guoaLFCCv_PmUmcuAAAN)
2026-01-12 20:36:26,751 - INFO - __main__ - 用户 1 注册 WebSocket 连接成功: 05b2b1b8-4c40-4afc-a9d8-f04e8579ad2b
2026-01-12 20:36:48,439 - INFO - __main__ - 准备向用户 1 推送消息: message_id=494, session_id=chat_1_52b86423, from_user_id=2
2026-01-12 20:36:48,440 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=494, namespace=/
2026-01-12 20:36:48,441 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=494
2026-01-12 20:36:48,441 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=494
2026-01-12 20:36:48,442 - INFO - __main__ - 消息推送完成: message_id=494, to_user_id=1, delivered_count=1
2026-01-12 20:36:48,444 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=494, namespace=/
2026-01-12 20:36:48,445 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=494
2026-01-12 20:36:48,445 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=494
2026-01-12 20:36:48,469 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:36:48,469 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:36:48,470 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:36:48,475 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:36:48,476 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:36:48,476 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:36:48,483 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:36:48,484 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:36:48,485 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:36:55,629 - INFO - __main__ - 准备向用户 1 推送消息: message_id=495, session_id=chat_1_52b86423, from_user_id=2
2026-01-12 20:36:55,630 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=495, namespace=/
2026-01-12 20:36:55,630 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=495
2026-01-12 20:36:55,631 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=495
2026-01-12 20:36:55,631 - INFO - __main__ - 消息推送完成: message_id=495, to_user_id=1, delivered_count=1
2026-01-12 20:36:55,633 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=495, namespace=/
2026-01-12 20:36:55,633 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=495
2026-01-12 20:36:55,633 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=495
2026-01-12 20:36:55,662 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:36:55,662 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:36:55,663 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:36:55,668 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:36:55,668 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:36:55,669 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:37:03,719 - INFO - __main__ - 消息 496 包含引用消息ID: 494, 会话: chat_1_52b86423
2026-01-12 20:37:03,720 - INFO - __main__ - 准备向用户 1 推送消息: message_id=496, session_id=chat_1_52b86423, from_user_id=2
2026-01-12 20:37:03,720 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_1, event=new_message, message_id=496, namespace=/
2026-01-12 20:37:03,721 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_1, event=new_message, message_id=496
2026-01-12 20:37:03,721 - INFO - backend.websocket.websocket_manager - 向用户 1 的 1 个连接发送消息: new_message, message_id=496
2026-01-12 20:37:03,721 - INFO - __main__ - 消息推送完成: message_id=496, to_user_id=1, delivered_count=1
2026-01-12 20:37:03,722 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=new_message, message_id=496, namespace=/
2026-01-12 20:37:03,723 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=new_message, message_id=496
2026-01-12 20:37:03,723 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: new_message, message_id=496
2026-01-12 20:37:03,761 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:37:03,761 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:37:03,762 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:37:03,765 - INFO - backend.websocket.websocket_manager - 准备发送消息到房间: user_2, event=message_status, message_id=unknown, namespace=/
2026-01-12 20:37:03,767 - INFO - backend.websocket.websocket_manager - 消息已发送到房间: user_2, event=message_status, message_id=unknown
2026-01-12 20:37:03,767 - INFO - backend.websocket.websocket_manager - 向用户 2 的 1 个连接发送消息: message_status, message_id=unknown
2026-01-12 20:37:06,132 - INFO - root - 消息 494 已被用户 2 撤回
2026-01-12 20:38:34,346 - WARNING - backend.websocket.websocket_manager - 连接 05b2b1b8-4c40-4afc-a9d8-f04e8579ad2b 心跳超时，自动断开
2026-01-12 20:38:34,366 - INFO - root - 连接 05b2b1b8-4c40-4afc-a9d8-f04e8579ad2b 已断开
2026-01-12 20:38:34,367 - INFO - backend.websocket.websocket_manager - 用户 1 断开连接: 05b2b1b8-4c40-4afc-a9d8-f04e8579ad2b
2026-01-12 20:41:12,713 - INFO - __main__ - WebSocket 连接断开: guoaLFCCv_PmUmcuAAAN
2026-01-12 20:41:12,714 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-12 20:41:15,031 - INFO - __main__ - WebSocket 连接断开: aYBAIy8QkG3pPDK2AAAF
2026-01-12 20:41:15,039 - INFO - root - 连接 1768219958377-a2rtsn3if 已断开
2026-01-12 20:41:15,040 - INFO - backend.websocket.websocket_manager - 用户 2 断开连接: 1768219958377-a2rtsn3if
2026-01-12 20:41:23,904 - INFO - root - 数据库连接成功
2026-01-12 20:41:23,943 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-12 20:41:23,952 - INFO - root - user_connections 表创建成功
2026-01-12 20:41:23,955 - INFO - root - user_devices 表创建成功
2026-01-12 20:41:23,958 - INFO - root - message_queue 表创建成功
2026-01-12 20:41:23,958 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-12 20:41:23,958 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-12 20:41:26,820 - INFO - root - 用户 2 的设备 1768220025543-trv16ne3i 已注册
2026-01-12 20:41:26,851 - INFO - root - 用户 2 的连接 1768219958377-a2rtsn3if 已创建
2026-01-12 20:45:36,240 - INFO - root - 用户 1 的设备 651b5003-612f-4b86-8cad-3836e26943b9 已注册
2026-01-12 20:45:36,272 - INFO - root - 用户 1 的连接 cd6c1e61-eb13-4cbe-99db-1f6faebbae10 已创建
2026-01-12 20:46:01,900 - INFO - root - 消息 497 已被用户 2 撤回
2026-01-12 20:46:05,002 - INFO - root - 消息 498 已被用户 2 撤回
2026-01-12 20:46:26,201 - INFO - root - 连接 cd6c1e61-eb13-4cbe-99db-1f6faebbae10 已断开
2026-01-12 20:51:26,124 - INFO - root - 用户 1 的设备 282a0a73-caf8-4530-ae5c-8426759e0421 已注册
2026-01-12 20:51:26,133 - INFO - root - 用户 1 的连接 71624409-7ccf-4506-a4ac-1b2a22d9e8d7 已创建
2026-01-12 20:52:52,740 - INFO - root - 连接 71624409-7ccf-4506-a4ac-1b2a22d9e8d7 已断开
2026-01-12 20:52:55,112 - INFO - root - 用户 1 的设备 1622377b-bc13-4e90-a69f-5959feb7cfa9 已注册
2026-01-12 20:52:55,141 - INFO - root - 用户 1 的连接 64a151ec-2720-4c50-ba4a-b18a31661f55 已创建
2026-01-12 20:53:41,277 - INFO - root - 连接 64a151ec-2720-4c50-ba4a-b18a31661f55 已断开
2026-01-12 20:53:43,627 - INFO - root - 连接 1768219958377-a2rtsn3if 已断开
2026-01-13 10:56:21,346 - INFO - root - 数据库连接成功
2026-01-13 10:56:21,422 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-13 10:56:21,438 - INFO - root - user_connections 表创建成功
2026-01-13 10:56:21,443 - INFO - root - user_devices 表创建成功
2026-01-13 10:56:21,448 - INFO - root - message_queue 表创建成功
2026-01-13 10:56:21,448 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-13 10:56:21,448 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-13 10:56:46,611 - INFO - root - 用户 1 的设备 d75e3997-55d8-4edd-a06a-55f3d5bbec94 已注册
2026-01-13 10:56:46,621 - INFO - root - 用户 1 的连接 331c85d3-5ecc-484c-b90f-fa702c7a1326 已创建
2026-01-13 10:57:03,572 - INFO - __main__ - 客服 小旭 登录成功，ID: 2
2026-01-13 10:57:16,933 - INFO - root - 用户 2 的设备 1768273036891-n7upui64e 已注册
2026-01-13 10:57:16,942 - INFO - root - 用户 2 的连接 1768273014628-a7sdyovkw 已创建
2026-01-13 10:58:51,488 - WARNING - backend.websocket.websocket_manager - 连接 331c85d3-5ecc-484c-b90f-fa702c7a1326 心跳超时，自动断开
2026-01-13 10:58:51,572 - INFO - root - 连接 331c85d3-5ecc-484c-b90f-fa702c7a1326 已断开
2026-01-13 10:59:30,634 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-13 10:59:35,402 - INFO - root - 用户 1 的设备 68a4796b-1a49-45f1-9eb7-d44a78a8d5da 已注册
2026-01-13 10:59:35,412 - INFO - root - 用户 1 的连接 c3ef3e51-e9d4-4b06-8f2a-e1d7999e995e 已创建
2026-01-13 10:59:48,351 - INFO - root - 连接 c3ef3e51-e9d4-4b06-8f2a-e1d7999e995e 已断开
2026-01-13 10:59:49,971 - INFO - root - 连接 1768273014628-a7sdyovkw 已断开
2026-01-13 10:59:56,079 - INFO - root - 数据库连接成功
2026-01-13 10:59:56,116 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-13 10:59:56,131 - INFO - root - user_connections 表创建成功
2026-01-13 10:59:56,134 - INFO - root - user_devices 表创建成功
2026-01-13 10:59:56,138 - INFO - root - message_queue 表创建成功
2026-01-13 10:59:56,138 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-13 10:59:56,138 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-13 10:59:56,653 - INFO - root - 用户 2 的设备 1768273036891-n7upui64e 已注册
2026-01-13 10:59:56,685 - INFO - root - 用户 2 的连接 1768273014628-a7sdyovkw 已创建
2026-01-13 11:02:45,540 - INFO - root - 用户 1 的设备 cee06f6d-6d93-43f9-be7d-f8cf4185b953 已注册
2026-01-13 11:02:45,548 - INFO - root - 用户 1 的连接 9737b473-5c4d-4f71-b7a4-9f4cff810449 已创建
2026-01-13 11:03:45,242 - INFO - root - 连接 9737b473-5c4d-4f71-b7a4-9f4cff810449 已断开
2026-01-13 11:03:45,244 - INFO - root - 连接 1768273014628-a7sdyovkw 已断开
2026-01-13 11:04:02,522 - INFO - root - 数据库连接成功
2026-01-13 11:04:02,571 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-13 11:04:02,583 - INFO - root - user_connections 表创建成功
2026-01-13 11:04:02,585 - INFO - root - user_devices 表创建成功
2026-01-13 11:04:02,588 - INFO - root - message_queue 表创建成功
2026-01-13 11:04:02,588 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-13 11:04:02,588 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-13 11:04:02,948 - INFO - root - 用户 2 的设备 1768273036891-n7upui64e 已注册
2026-01-13 11:04:02,958 - INFO - root - 用户 2 的连接 1768273014628-a7sdyovkw 已创建
2026-01-13 11:04:06,611 - INFO - root - 用户 1 的设备 75edf7af-e222-4a23-b11a-c7fd20128e20 已注册
2026-01-13 11:04:06,620 - INFO - root - 用户 1 的连接 d1d2f52b-f7e7-471d-86a5-42212cd9b9ea 已创建
2026-01-13 11:06:32,637 - WARNING - backend.websocket.websocket_manager - 连接 d1d2f52b-f7e7-471d-86a5-42212cd9b9ea 心跳超时，自动断开
2026-01-13 11:06:32,660 - INFO - root - 连接 d1d2f52b-f7e7-471d-86a5-42212cd9b9ea 已断开
2026-01-13 11:10:10,885 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-13 11:10:12,122 - INFO - root - 连接 1768273014628-a7sdyovkw 已断开
2026-01-13 11:10:23,734 - INFO - root - 数据库连接成功
2026-01-13 11:10:23,772 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-13 11:10:23,784 - INFO - root - user_connections 表创建成功
2026-01-13 11:10:23,787 - INFO - root - user_devices 表创建成功
2026-01-13 11:10:23,791 - INFO - root - message_queue 表创建成功
2026-01-13 11:10:23,791 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-13 11:10:23,792 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-13 11:10:24,208 - INFO - root - 用户 2 的设备 1768273036891-n7upui64e 已注册
2026-01-13 11:10:24,241 - INFO - root - 用户 2 的连接 1768273014628-a7sdyovkw 已创建
2026-01-13 11:10:48,854 - INFO - root - 用户 1 的设备 447ec59a-6640-495f-bf70-bceef9558bed 已注册
2026-01-13 11:10:48,863 - INFO - root - 用户 1 的连接 be171246-f4bd-49bf-8f91-c771d55604d8 已创建
2026-01-13 11:12:53,853 - WARNING - backend.websocket.websocket_manager - 连接 be171246-f4bd-49bf-8f91-c771d55604d8 心跳超时（距离上次心跳 125.0 秒），自动断开
2026-01-13 11:12:53,872 - INFO - root - 连接 be171246-f4bd-49bf-8f91-c771d55604d8 已断开
2026-01-13 11:17:47,925 - INFO - root - 连接 1768273014628-a7sdyovkw 已断开
2026-01-13 11:17:49,969 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-13 11:18:01,515 - INFO - root - 数据库连接成功
2026-01-13 11:18:01,564 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-13 11:18:01,579 - INFO - root - user_connections 表创建成功
2026-01-13 11:18:01,582 - INFO - root - user_devices 表创建成功
2026-01-13 11:18:01,587 - INFO - root - message_queue 表创建成功
2026-01-13 11:18:01,587 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-13 11:18:01,588 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-13 11:18:07,321 - INFO - __main__ - 客服 小旭 登录成功，ID: 2
2026-01-13 11:19:58,322 - INFO - root - 数据库连接成功
2026-01-13 11:19:58,365 - INFO - root - chat_messages 表消息状态字段升级完成
2026-01-13 11:19:58,380 - INFO - root - user_connections 表创建成功
2026-01-13 11:19:58,383 - INFO - root - user_devices 表创建成功
2026-01-13 11:19:58,388 - INFO - root - message_queue 表创建成功
2026-01-13 11:19:58,388 - INFO - backend.websocket.websocket_manager - WebSocket 管理器初始化完成
2026-01-13 11:19:58,389 - INFO - backend.websocket.websocket_manager - WebSocket 心跳检测线程已启动
2026-01-13 11:20:00,703 - INFO - root - 用户 1 的设备 b71e93c2-e739-4eb6-bae7-0b16425ad5a9 已注册
2026-01-13 11:20:00,711 - INFO - root - 用户 1 的连接 eb9fbfa1-0654-450b-bf0d-8fbd62923de1 已创建
2026-01-13 11:20:28,359 - INFO - root - 用户 2 的设备 1768274428322-wfm7vasoo 已注册
2026-01-13 11:20:28,368 - INFO - root - 用户 2 的连接 1768274268280-mpiac4sca 已创建
2026-01-13 11:22:28,409 - WARNING - backend.websocket.websocket_manager - 连接 eb9fbfa1-0654-450b-bf0d-8fbd62923de1 心跳超时（距离上次心跳 147.7 秒），自动断开
2026-01-13 11:22:28,418 - INFO - root - 连接 eb9fbfa1-0654-450b-bf0d-8fbd62923de1 已断开
2026-01-13 11:22:58,520 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-13 11:23:08,816 - INFO - root - 用户 1 的设备 2c91522b-da6f-4d9d-b741-3f1e011fdbd9 已注册
2026-01-13 11:23:08,846 - INFO - root - 用户 1 的连接 e5641f6b-6a4d-4c67-a3f7-c5a1771f7377 已创建
2026-01-13 11:25:28,464 - WARNING - backend.websocket.websocket_manager - 连接 e5641f6b-6a4d-4c67-a3f7-c5a1771f7377 心跳超时（距离上次心跳 139.6 秒），自动断开
2026-01-13 11:25:28,472 - INFO - root - 连接 e5641f6b-6a4d-4c67-a3f7-c5a1771f7377 已断开
2026-01-13 11:29:34,952 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-13 11:29:40,927 - INFO - root - 用户 1 的设备 1b5ef64f-2b5e-4c03-8bc6-0e0ce30977e2 已注册
2026-01-13 11:29:40,937 - INFO - root - 用户 1 的连接 7fe4648e-3105-4307-974b-ca7330a4ec0a 已创建
2026-01-13 11:31:58,575 - WARNING - backend.websocket.websocket_manager - 连接 7fe4648e-3105-4307-974b-ca7330a4ec0a 心跳超时（距离上次心跳 137.6 秒），自动断开
2026-01-13 11:31:58,586 - INFO - root - 连接 7fe4648e-3105-4307-974b-ca7330a4ec0a 已断开
2026-01-13 11:35:14,036 - WARNING - backend.websocket.websocket_manager - 断开连接失败：未找到连接ID
2026-01-13 11:37:21,796 - INFO - root - 用户 1 的设备 c1c7cbd0-5fb5-428c-8d92-7d5b6ae959fc 已注册
2026-01-13 11:37:21,806 - INFO - root - 用户 1 的连接 67c8adb1-7c1d-4c85-8f7f-7ad928a586bb 已创建
2026-01-13 11:37:43,611 - INFO - root - 消息 519 已被用户 2 撤回
2026-01-13 11:37:51,878 - INFO - root - 消息 520 已被用户 2 撤回
