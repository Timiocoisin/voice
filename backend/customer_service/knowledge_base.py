# -*- coding: utf-8 -*-
"""
客服知识库模块
存储常见问题和对应的答案
"""

# 知识库：关键词 -> 答案映射
KNOWLEDGE_BASE = {
    # 手机使用相关
    "手机": {
        "keywords": ["手机", "移动", "安卓", "ios", "iphone", "android", "移动设备", "便携"],
        "answer": """📱 手机能不能使用变声器？

软件需要电脑运行，可转接到手机：

▸ 方法一
买转接器（如 直播一号 / ds7pro），把声音转到手机。

▸ 方法二
用支持 OTG 的声卡（如 艾肯micu / midi r2），直接插上即可。""",
        "priority": 1
    },
    
    # 变声参数相关
    "变声参数": {
        "keywords": ["变声", "参数", "设置", "音调", "音量", "延迟", "阈值", "怎么调", "如何设置", "参数设置"],
        "answer": """🎛️ 变声参数怎么设置？

参数：音调、音量、延迟、阈值

▸ 音调
男→女：10~14
女→男：-14~-10
同性：0 左右

▸ 音量
不要太高，易爆音失真
建议 0.5 左右

▸ 延迟
一般 0.5~0.7
配置好可压低到 0.3
打游戏时适当调高

▸ 阈值
默认 -60
环境吵选 -57 减少噪音""",
        "priority": 1
    },
    
    # 虚拟声卡相关
    "虚拟声卡": {
        "keywords": ["虚拟声卡", "声卡", "安装", "驱动", "设置", "采样", "监听", "48000", "幻音麦克风"],
        "answer": """🔊 如何安装虚拟声卡？

步骤：

▸ 打开设置中心，安装虚拟声卡
点击虚拟声卡，一键安装后，打开声音设置。
确保系统声音中：
• 默认播放：耳机
• 默认录制：幻音麦克风

▸ 设置幻音麦克风
需要设置采样和监听：
• 不设置采样 → 无法变声
• 不设置监听 → 听不到效果

▸ 对齐采样 48000
在设置中心找到采样设置，设置为 48000

▸ 监听设置（不想听可去掉）
在设置中心找到监听选项，根据需要开启或关闭

▸ 无法直接安装？
找到安装目录：
\\resources\\server\\driver
右键管理员运行 Setup.exe""",
        "priority": 1
    },
    
    # VIP会员相关
    "VIP": {
        "keywords": ["vip", "会员", "充值", "付费", "购买", "套餐", "价格", "多少钱", "费用", "钻石"],
        "answer": """💎 VIP会员服务

您可以点击右上角VIP图标查看会员套餐详情。

会员功能包括：
• 更多变声效果
• 高级参数设置
• 优先客服支持
• 专属功能解锁

如有疑问，随时问我哦~""",
        "priority": 2
    },
    
    # 软件使用相关
    "使用问题": {
        "keywords": ["怎么用", "如何使用", "不会用", "教程", "帮助", "使用", "操作", "功能"],
        "answer": """📖 软件使用帮助

主要功能：
1. 变声效果：调整音调、音量等参数
2. 虚拟声卡：安装后可在其他软件中使用
3. 实时监听：听到变声效果

常见操作：
• 点击右上角耳机图标可联系客服
• 右侧常见问题可查看详细教程
• 设置中心可配置虚拟声卡和参数

遇到具体问题可以详细描述，我会尽力帮助您~""",
        "priority": 3
    },
    
    # 故障排除相关
    "故障": {
        "keywords": ["故障", "问题", "错误", "无法", "不能", "失败", "报错", "异常", "bug", "卡顿"],
        "answer": """🔧 故障排除

常见问题排查：

1. 无法变声？
   • 检查虚拟声卡是否安装
   • 确认采样率设置为 48000
   • 检查系统默认录制设备是否为"幻音麦克风"

2. 没有声音？
   • 检查系统音量设置
   • 确认监听功能已开启
   • 检查音频设备连接

3. 声音延迟？
   • 降低延迟参数（建议 0.5~0.7）
   • 关闭其他占用音频的程序

如果问题仍未解决，请详细描述具体情况，我会进一步协助您~""",
        "priority": 2
    },
    
    # 默认回复（未匹配时）
    "默认": {
        "keywords": [],
        "answer": """😊 您好！

我是"声音序章"的智能客服小助手~

您的问题我已经收到，正在为您查询中...
如果问题比较复杂，建议您：
• 查看右侧常见问题面板
• 详细描述您遇到的问题
• 我会尽快为您解答

感谢您的耐心等待~""",
        "priority": 999
    }
}

# 随机语气词池（让回复更自然）
GREETING_WORDS = [
    "好哒",
    "收到啦",
    "好的",
    "明白",
    "了解",
    "没问题"
]

ENDING_WORDS = [
    "~",
    "✨",
    "😊",
    "哦",
    "呢",
    "哈"
]

